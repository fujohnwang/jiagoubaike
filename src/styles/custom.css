/* 自定义CSS - 改善代码块视觉效果 */

/* 代码块整体样式改进 */
.expressive-code {
  margin: 1.5rem 0 !important;
  border-radius: 0.75rem !important;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06) !important;
  overflow: hidden !important;
}

/* 改善代码块背景和边框 */
.expressive-code .frame {
  background: #f8fafc !important;
  border: 1px solid #e2e8f0 !important;
}

/* 深色模式下的代码块样式 */
.dark .expressive-code .frame {
  background: #1e293b !important;
  border: 1px solid #334155 !important;
}

/* 代码内容区域 */
.expressive-code pre {
  background: transparent !important;
  padding: 1.25rem !important;
  overflow-x: auto !important;
  font-size: 0.875rem !important;
  line-height: 1.6 !important;
}

/* 代码字体和颜色改进 */
.expressive-code code {
  font-family: 'JetBrains Mono', 'Fira Code', 'SF Mono', Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;
  color: #334155 !important;
  font-weight: 400 !important;
}

.dark .expressive-code code {
  color: #e2e8f0 !important;
}

/* 行号样式 */
.expressive-code .line-numbers {
  color: #94a3b8 !important;
  font-size: 0.75rem !important;
  user-select: none !important;
  padding-right: 1rem !important;
}

.dark .expressive-code .line-numbers {
  color: #64748b !important;
}

/* 语法高亮颜色改进 - 浅色主题 */
.expressive-code .token.comment,
.expressive-code .token.prolog,
.expressive-code .token.doctype,
.expressive-code .token.cdata {
  color: #6b7280 !important;
  font-style: italic !important;
}

.expressive-code .token.keyword,
.expressive-code .token.tag,
.expressive-code .token.boolean,
.expressive-code .token.number,
.expressive-code .token.constant,
.expressive-code .token.symbol,
.expressive-code .token.deleted {
  color: #dc2626 !important;
  font-weight: 500 !important;
}

.expressive-code .token.string,
.expressive-code .token.char,
.expressive-code .token.attr-value,
.expressive-code .token.regex,
.expressive-code .token.variable {
  color: #059669 !important;
}

.expressive-code .token.operator,
.expressive-code .token.entity,
.expressive-code .token.url {
  color: #d97706 !important;
}

.expressive-code .token.atrule,
.expressive-code .token.attr-name,
.expressive-code .token.class-name {
  color: #7c3aed !important;
}

.expressive-code .token.function {
  color: #2563eb !important;
  font-weight: 500 !important;
}

.expressive-code .token.property,
.expressive-code .token.selector {
  color: #0891b2 !important;
}

/* 深色主题语法高亮 */
.dark .expressive-code .token.comment,
.dark .expressive-code .token.prolog,
.dark .expressive-code .token.doctype,
.dark .expressive-code .token.cdata {
  color: #9ca3af !important;
}

.dark .expressive-code .token.keyword,
.dark .expressive-code .token.tag,
.dark .expressive-code .token.boolean,
.dark .expressive-code .token.number,
.dark .expressive-code .token.constant,
.dark .expressive-code .token.symbol,
.dark .expressive-code .token.deleted {
  color: #f87171 !important;
}

.dark .expressive-code .token.string,
.dark .expressive-code .token.char,
.dark .expressive-code .token.attr-value,
.dark .expressive-code .token.regex,
.dark .expressive-code .token.variable {
  color: #34d399 !important;
}

.dark .expressive-code .token.operator,
.dark .expressive-code .token.entity,
.dark .expressive-code .token.url {
  color: #fbbf24 !important;
}

.dark .expressive-code .token.atrule,
.dark .expressive-code .token.attr-name,
.dark .expressive-code .token.class-name {
  color: #a78bfa !important;
}

.dark .expressive-code .token.function {
  color: #60a5fa !important;
}

.dark .expressive-code .token.property,
.dark .expressive-code .token.selector {
  color: #22d3ee !important;
}

/* 行高亮效果 */
.expressive-code .line.highlighted {
  background-color: rgba(59, 130, 246, 0.1) !important;
  border-left: 3px solid #3b82f6 !important;
  padding-left: 0.75rem !important;
  margin-left: -0.75rem !important;
}

.dark .expressive-code .line.highlighted {
  background-color: rgba(59, 130, 246, 0.2) !important;
}

/* 代码块标题样式 */
.expressive-code .frame-title {
  background: #f1f5f9 !important;
  color: #475569 !important;
  font-size: 0.875rem !important;
  font-weight: 500 !important;
  padding: 0.5rem 1rem !important;
  border-bottom: 1px solid #e2e8f0 !important;
}

.dark .expressive-code .frame-title {
  background: #0f172a !important;
  color: #cbd5e1 !important;
  border-bottom-color: #334155 !important;
}

/* 复制按钮样式改进 */
.expressive-code .copy-button {
  background: #f8fafc !important;
  border: 1px solid #e2e8f0 !important;
  color: #64748b !important;
  border-radius: 0.375rem !important;
  padding: 0.25rem 0.5rem !important;
  font-size: 0.75rem !important;
  transition: all 0.2s ease !important;
}

.expressive-code .copy-button:hover {
  background: #e2e8f0 !important;
  color: #475569 !important;
}

.dark .expressive-code .copy-button {
  background: #1e293b !important;
  border-color: #334155 !important;
  color: #94a3b8 !important;
}

.dark .expressive-code .copy-button:hover {
  background: #334155 !important;
  color: #e2e8f0 !important;
}

/* 滚动条样式 */
.expressive-code pre::-webkit-scrollbar {
  height: 8px !important;
}

.expressive-code pre::-webkit-scrollbar-track {
  background: #f1f5f9 !important;
  border-radius: 4px !important;
}

.expressive-code pre::-webkit-scrollbar-thumb {
  background: #cbd5e1 !important;
  border-radius: 4px !important;
}

.expressive-code pre::-webkit-scrollbar-thumb:hover {
  background: #94a3b8 !important;
}

.dark .expressive-code pre::-webkit-scrollbar-track {
  background: #0f172a !important;
}

.dark .expressive-code pre::-webkit-scrollbar-thumb {
  background: #475569 !important;
}

.dark .expressive-code pre::-webkit-scrollbar-thumb:hover {
  background: #64748b !important;
}

/* 内联代码样式改进 */
code:not(pre code) {
  background: #f1f5f9 !important;
  color: #dc2626 !important;
  padding: 0.125rem 0.375rem !important;
  border-radius: 0.25rem !important;
  font-size: 0.875em !important;
  font-weight: 500 !important;
  border: 1px solid #e2e8f0 !important;
}

.dark code:not(pre code) {
  background: #1e293b !important;
  color: #f87171 !important;
  border-color: #334155 !important;
}

/* 响应式设计 */
@media (max-width: 768px) {
  .expressive-code {
    margin: 1rem -1rem !important;
    border-radius: 0 !important;
  }

  .expressive-code pre {
    padding: 1rem !important;
    font-size: 0.8rem !important;
  }
}

/* 焦点状态 */
.expressive-code:focus-within {
  outline: 2px solid #3b82f6 !important;
  outline-offset: 2px !important;
}

/* 改善选中文本的可读性 */
.expressive-code ::selection {
  background: rgba(59, 130, 246, 0.3) !important;
}

.dark .expressive-code ::selection {
  background: rgba(59, 130, 246, 0.4) !important;
}
